import e,{useRef as n,useEffect as t,forwardRef as r}from"react";import o from"prop-types";import a from"lottie-web";function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=r.animationData,l=r.loop,c=r.autoplay,p=r.initialSegment,d=r.onComplete,f=r.onLoopComplete,s=r.onEnterFrame,m=r.onSegmentStart,y=r.onConfigReady,g=r.onDataReady,b=r.onDataFailed,O=r.onLoadedImages,S=r.onDOMLoaded,v=r.onDestroy,D=n(null),h=n(null),j=function(){D.current&&D.current.play()},P=function(){D.current&&D.current.stop()},L=function(){D.current&&D.current.pause()},w=function(e){D.current&&D.current.setSpeed(e)},E=function(e,n){D.current&&D.current.goToAndPlay(e,n)},C=function(e,n){D.current&&D.current.goToAndStop(e,n)},T=function(e){D.current&&D.current.setDirection(e)},A=function(e,n){D.current&&D.current.playSegments(e,n)},R=function(e){D.current&&D.current.setSubframe(e)},F=function(){D.current&&D.current.destroy()},x=function(e){if(D.current)return D.current.getDuration(e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D.current&&D.current.destroy();var n=i(i(i({animationData:u||null,loop:Number.isNaN(l)?!1!==l:l,autoplay:!1!==c,initialSegment:p||null},r),e),{},{container:h.current});D.current=a.loadAnimation(n)};t((function(){I()}),[u,l,c,p]);var M=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return D.current&&(t&&D.current.removeEventListener(e),e&&n)?(D.current.addEventListener(e,n),function(){D.current.removeEventListener(e,n)}):function(){}};t((function(){var e=[{name:"complete",handler:d},{name:"loopComplete",handler:f},{name:"enterFrame",handler:s},{name:"segmentStart",handler:m},{name:"config_ready",handler:y},{name:"data_ready",handler:g},{name:"data_failed",handler:b},{name:"loaded_images",handler:O},{name:"DOMLoaded",handler:S},{name:"destroy",handler:v}].map((function(e){return M(e.name,e.handler)}));return function(){e.forEach((function(e){return e()}))}}),[d,f,s,m,y,g,b,O,S,v]);var _=e.createElement("div",{style:o,ref:h});return{View:_,play:j,stop:P,pause:L,setSpeed:w,goToAndStop:C,goToAndPlay:E,setDirection:T,playSegments:A,setSubframe:R,destroy:F,getDuration:x}},d=r((function(e,r){var o=e.style,a=c(e,["style"]),u=r||n(),l=p(a,o),i=l.View,d=l.play,f=l.stop,s=l.pause,m=l.setSpeed,y=l.goToAndStop,g=l.goToAndPlay,b=l.setDirection,O=l.playSegments,S=l.setSubframe,v=l.destroy,D=l.getDuration;return t((function(){u&&(u.current={play:d,stop:f,pause:s,setSpeed:m,goToAndPlay:g,goToAndStop:y,setDirection:b,playSegments:O,setSubframe:S,destroy:v,getDuration:D})}),[u.current]),i}));d.propTypes={animationData:o.shape(void 0).isRequired,loop:o.oneOfType([o.bool,o.number]),autoplay:o.bool,initialSegment:o.arrayOf(o.shape(o.number.isRequired)),onComplete:o.func,onLoopComplete:o.func,onEnterFrame:o.func,onSegmentStart:o.func,onConfigReady:o.func,onDataReady:o.func,onDataFailed:o.func,onLoadedImages:o.func,onDOMLoaded:o.func,onDestroy:o.func,style:o.shape(void 0)},d.defaultProps={loop:!0,autoplay:!0,initialSegment:null,onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onConfigReady:null,onDataReady:null,onDataFailed:null,onLoadedImages:null,onDOMLoaded:null,onDestroy:null,style:null};var f=d,s=p;export default d;export{f as Animator,s as useAnimator,p as useLottie};
